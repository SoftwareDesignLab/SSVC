# Doccano JSONL to BIO Converter

This script converts a JSONL export from Doccano, which contains sequence labeling annotations, into CSV files with BIO tagging suitable for training a BERT-based sequence labeling model. Additionally, it creates a separate CSV file that records overlapping multi-label annotations and their corresponding line numbers along with JSONL id.

## Requirements

1. Python 3.6 or higher

## Usage

1. Export your sequence labeling annotations from Doccano in JSONL format.

2. Place the exported JSONL file in the same directory as the convert_jsonl_to_csv.py script.

3. For guidance on formatting and rules applied during the JSONL to BIO conversion, refer to the "JSONL to BIO Rules" document [here]([https://github.com/SoftwareDesignLab/SSVC/blob/main/Exploitation%20Status/Exploit%20Collection%20and%20Reproducibility%20Analysis/BioScripts/JSONL%20to%20BIO%20Rules%20Documentation.pdf]).

4. Open the convert_jsonl_to_csv.py script in a text editor.

5. Run the script using the following command:

   ```bash
   python jsonl2bio.py

6. The script will generate two CSV files: 
- `output.csv`: Contains the BIO tagged labels for each token in the sequence.
- `multi_label.csv`: Records overlapping multi-label annotations and their corresponding line numbers in the JSONL file.

## CSV Format

### `output.csv`

The output.csv file will contain two columns: text and label.
- The `text` column contains the original text from the JSONL entry.
- The `label` column contains the BIO tagged labels for each token in the sequence.

### `multi_label.csv`

The multi_label.csv file will contain five columns: doccano_id, label_1, label_2, csv_line, and jsonl_line.
- The `id` column contains the doccano id associated with the annotation.
- The `label_1` column contains the first overlapping label.
- The `label_2` column contains the second overlapping label.
- The `csv_line` column contains the line number in the output.csv file where the overlap occurs.
- The `jsonl_line` column contains the line number in the original JSONL file where the overlap occurs.

## Additional Scripts

In addition to the `jsonl2bio.py` script, this repository also includes two other scripts:

1. `undersampling.py`: Generates a balanced BIO CSV by undersampling 'O' labels.
2. `count_entities.py`: Counts 'B' and 'O' labels in the generated BIO CSV.
3. `formatting.py`: Transforms BIO tagged sequence data into a structured CSV format with columns for sentence number, word, default 'NONE' part of speech, and tag.
4. `oversampling.py`: Balances BIO tagged sequence data by duplicating sentences containing underrepresented tags to reduce class imbalance.

[For detailed information about the preprocessing scripts, please refer to the attached PDF document.](https://github.com/SoftwareDesignLab/SSVC/blob/main/Exploitation%20Status/Exploit%20Collection%20and%20Reproducibility%20Analysis/BioScripts/Preprocessing%20Documentation.pdf)
